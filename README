This project is the backend software driving Mist, a learning irrigation controller.

It consists of backend web-service APIs.  A web front-end GUI for testing the APIs.  A simulator for outdoor environments for testing irrigation scheduling algorithms.  A weather station data crawler service.  And algorithms for learning and generating efficient irrigation schedules.

The project also consists of an iOS mobile application & embedded hardware controller and software, which are not part of this Github Repo.


It downloads hourly weather reports from NOAA weather stations across the USA.  It computes the daily ETo (reference evapotranspiration) for the geographic area near that weather station.  It then uses location specific parameters provided by the user to compute the ETL (lawn evapotranspiration).

All data is stored in MySQL tables and the computations and data downloads are coordinated using cron jobs.

A web.py webserver hosts a web-service API.  Through the API developers can interact with the users, devices, zones, weather stations, dailyETo calculations, and dailyETL calculations.


ZeusET Developer Setup

The following was done on a fresh installation of Mac OS Lion on a 2011 MBP 15 inch.

Python
which python (make sure it says /usr/bin/python)
python -V (make sure it says Python 2.7.1)

MySQL
download MySQL x86 64 bit v 10.6 DMG
open the DMG, run the MySQLStartupItem pkg installer and the mysql pkg installer
mysql should now be installed in /usr/local

If you installed the Startup Item, use this command:
sudo /Library/StartupItems/MySQLCOM/MySQLCOM start
 
set user password:

now cd into /usr/local/mysql/bin
run ./mysql -u root

mysql>SET PASSWORD FOR 'root'@'localhost' = PASSWORD('*****');

create database:

back in /usr/local/mysql/bin
run ./mysqladmin -u root -p create zeus

create zeus admin user:
run mysql again as root (./mysql -u root -p)
GRANT CREATE, SELECT, INSERT, UPDATE, DELETE
    ->ON zeus.* TO zeusAdmin@localhost;

set password for zeusAdmin:
mysql>SET PASSWORD FOR 'root'@'localhost' = PASSWORD('*****');

MySqlDB python interface to MySQL setup
download the MySQL python tar

download setuptools2.7
http://pypi.python.org/pypi/setuptools

run: sudo sh ./setuptools-0.6c11-py2.7.egg

now back to MySQLDB (looks like you need XCode installed to have the compiler - and with XCode 4 have to download command line tools to get llvm gcc back)

$ tar xfz MySQL-python-1.2.1.tar.gz
  $ cd MySQL-python-1.2.1
  $ # edit site.cfg if necessary
  $ python setup.py build
  $ sudo python setup.py install # or su first

sudo ln -s /usr/local/mysql/lib/libmysqlclient.18.dylib /usr/lib/libmysqlclient.18.dylib

PyMetar
download pymetar 1.8 from host website
open tar, cd into folder and run
python setup.py build
python setup.py install

Cron Jobs
set up cron job to run the CrawlWeatherData script every hour
set up cron job to run the DailyETo script every 24 hours
set up cron job to run the DailyETLperZone script every 24 hours

web.py - lightweight framework to build Zeus web services API
- http://webpy.org/static/web.py-0.36.tar.gz
sudo python setup.py install
